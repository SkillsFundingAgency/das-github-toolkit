Import-Module $PSScriptRoot\..\src\GitHubToolKit.psm1 -Force

Describe "Set-GitHubVulnerabilityWebhook tests" -Tags @("Unit") {
    Mock Invoke-RestMethod
    Mock Invoke-WebRequest

    $Params = @{
        GithubUsername = "FooUser"
        GithubPATToken = "not-a-real-pat-token"
        OrgName = "FooAgency"
        RepoSearchString = "foo-"
        WebhookUrl = "https://example.com/webhook"
    }

    Context "All parameters passed in, webhook doesn't exist" {
        #Skipped tests: uses deprecated method to authenticate with GitHub API
        It "Should test for an existing webhook and then create the webhook" -Skip {

        }
    }
}
